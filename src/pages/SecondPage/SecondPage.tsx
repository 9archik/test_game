import styles from './SecondPage.module.scss';
import Alien from '../../components/Alien/Alien';
import alienIMG from '../../assets/images/alien_green.png';
import BgImage from '../../components/BgImage/BgImage';
import Button from '../../components/Button/Button';
import { useContext, useRef, useEffect } from 'react';
import { IStep, StepContext } from '../../providers/stepProvider';
import AttentionBlock from '../../components/AttentionBlock/AttentionBlock';
import ourAlienImg from '../../assets/images/alien_yellow.png';

const BubbleSVG = () => {
	const imgRef = useRef<SVGSVGElement>(null);
	const { step } = useContext(StepContext) as IStep;
	useEffect(() => {
		if (imgRef && imgRef.current) {
			const imgElement = imgRef.current;
			imgElement.style.animation = 'none';

			requestAnimationFrame(() => {
				imgElement.style.animation = '';
			});
		}
	}, [step]);
	return (
		<svg
			ref={imgRef}
			className={styles.bubbleSVG}
			width="147"
			height="148"
			viewBox="0 0 147 148"
			fill="none"
			xmlns="http://www.w3.org/2000/svg">
			<g opacity="0.5">
				<circle cx="73.5359" cy="73.5357" r="70.6522" fill="#BBE4FF" fillOpacity="0.4" />
				<path d="M146.927 93.5774H140.295V100.21H146.927V93.5774Z" fill="#FFCCE4" />
				<path d="M146.927 86.9443H140.295V93.577H146.927V86.9443Z" fill="#FFCCE4" />
				<path d="M146.927 80.1687H140.295V86.8013H146.927V80.1687Z" fill="#FFCCE4" />
				<path d="M146.927 73.5356H140.295V80.1683H146.927V73.5356Z" fill="#FFCCE4" />
				<path d="M146.927 66.9026H140.295V73.5353H146.927V66.9026Z" fill="#FFCCE4" />
				<path d="M146.927 60.1262H140.295V66.7589H146.927V60.1262Z" fill="#FFCCE4" />
				<path d="M146.927 53.4939H140.295V60.1265H146.927V53.4939Z" fill="#FFCCE4" />
				<path d="M146.927 46.7163H140.295V53.349H146.927V46.7163Z" fill="#FFCCE4" />
				<path d="M140.295 106.988H133.662V113.621H140.295V106.988Z" fill="#FFCCE4" />
				<path d="M140.295 100.21H133.662V106.843H140.295V100.21Z" fill="#FFCCE4" />
				<path d="M140.295 40.084H133.662V46.7166H140.295V40.084Z" fill="#F1F4CE" />
				<path d="M140.295 33.4514H133.662V40.0841H140.295V33.4514Z" fill="#F1F4CE" />
				<path d="M133.518 113.62H126.886V120.252H133.518V113.62Z" fill="#FFCCE4" />
				<path d="M133.518 26.6746H126.886V33.3072H133.518V26.6746Z" fill="#F1F4CE" />
				<path d="M126.886 120.253H120.253V126.885H126.886V120.253Z" fill="#FFCCE4" />
				<path d="M126.886 20.0415H120.253V26.6742H126.886V20.0415Z" fill="#F1F4CE" />
				<path d="M120.253 127.029H113.62V133.662H120.253V127.029Z" fill="#FFCCE4" />
				<path d="M120.253 13.4084H113.62V20.0411H120.253V13.4084Z" fill="#F1F4CE" />
				<path d="M113.476 127.029H106.844V133.662H113.476V127.029Z" fill="#FFCCE4" />
				<path d="M113.476 100.21H106.844V106.843H113.476V100.21Z" fill="#BBE4FF" />
				<path d="M113.476 13.4084H106.844V20.0411H113.476V13.4084Z" fill="#F1F4CE" />
				<path d="M106.843 133.662H100.211V140.295H106.843V133.662Z" fill="#FFCCE4" />
				<path d="M106.843 100.21H100.211V106.843H106.843V100.21Z" fill="#BBE4FF" />
				<path d="M106.843 6.63208H100.211V13.2647H106.843V6.63208Z" fill="#F1F4CE" />
				<path d="M100.211 133.662H93.578V140.295H100.211V133.662Z" fill="#FFCCE4" />
				<path d="M100.211 106.988H93.578V113.621H100.211V106.988Z" fill="#F1F4CE" />
				<path d="M100.211 6.63208H93.578V13.2647H100.211V6.63208Z" fill="#F1F4CE" />
				<path d="M93.4336 133.662H86.8009V140.295H93.4336V133.662Z" fill="#FFCCE4" />
				<path d="M93.4336 106.988H86.8009V113.621H93.4336V106.988Z" fill="#F1F4CE" />
				<path d="M93.4336 6.63208H86.8009V13.2647H93.4336V6.63208Z" fill="#F1F4CE" />
				<path d="M86.8014 140.439H80.1688V147.072H86.8014V140.439Z" fill="#FFCCE4" />
				<path d="M86.8014 113.62H80.1688V120.252H86.8014V113.62Z" fill="#FFCCE4" />
				<path d="M86.8014 -0.000244141H80.1688V6.63242H86.8014V-0.000244141Z" fill="#40BBFF" />
				<path d="M80.0243 140.439H73.3916V147.072H80.0243V140.439Z" fill="#FFCCE4" />
				<path d="M80.0243 113.62H73.3916V120.252H80.0243V113.62Z" fill="#FFCCE4" />
				<path d="M80.0243 -0.000244141H73.3916V6.63242H80.0243V-0.000244141Z" fill="#40BBFF" />
				<path d="M73.3915 140.439H66.7589V147.072H73.3915V140.439Z" fill="#FFCCE4" />
				<path d="M73.3915 -0.000244141H66.7589V6.63242H73.3915V-0.000244141Z" fill="#69EDFF" />
				<path d="M66.7586 140.439H60.126V147.072H66.7586V140.439Z" fill="#FFCCE4" />
				<path d="M66.7586 -0.000244141H60.126V6.63242H66.7586V-0.000244141Z" fill="#69EDFF" />
				<path d="M59.9822 133.662H53.3495V140.295H59.9822V133.662Z" fill="#FFCCE4" />
				<path d="M59.9822 33.4514H53.3495V40.0841H59.9822V33.4514Z" fill="#FFCCE4" />
				<path d="M59.9822 6.63208H53.3495V13.2647H59.9822V6.63208Z" fill="#69EDFF" />
				<path d="M53.3495 133.662H46.7168V140.295H53.3495V133.662Z" fill="#FFCCE4" />
				<path d="M53.3495 33.4514H46.7168V40.0841H53.3495V33.4514Z" fill="#F1F4CE" />
				<path d="M53.3495 6.63208H46.7168V13.2647H53.3495V6.63208Z" fill="#BBE4FF" />
				<path d="M46.7167 133.662H40.084V140.295H46.7167V133.662Z" fill="#FFCCE4" />
				<path d="M46.7167 40.084H40.084V46.7166H46.7167V40.084Z" fill="#F1F4CE" />
				<path d="M46.7167 6.63208H40.084V13.2647H46.7167V6.63208Z" fill="#BBE4FF" />
				<path d="M39.9402 127.029H33.3076V133.662H39.9402V127.029Z" fill="#FFD6C2" />
				<path d="M39.9402 46.7163H33.3076V53.349H39.9402V46.7163Z" fill="#BBE4FF" />
				<path d="M39.9402 13.4084H33.3076V20.0411H39.9402V13.4084Z" fill="#CDF7F0" />
				<path d="M33.3075 127.029H26.6748V133.662H33.3075V127.029Z" fill="#FFD6C2" />
				<path d="M33.3075 53.4939H26.6748V60.1265H33.3075V53.4939Z" fill="#BBE4FF" />
				<path d="M33.3075 13.4084H26.6748V20.0411H33.3075V13.4084Z" fill="#F1F4CE" />
				<path d="M26.6747 120.253H20.0421V126.885H26.6747V120.253Z" fill="#FFD6C2" />
				<path d="M26.6747 20.0415H20.0421V26.6742H26.6747V20.0415Z" fill="#F1F4CE" />
				<path d="M19.8975 113.62H13.2649V120.252H19.8975V113.62Z" fill="#FFD6C2" />
				<path d="M19.8975 26.6746H13.2649V33.3072H19.8975V26.6746Z" fill="#CDF7F0" />
				<path d="M13.2655 106.988H6.63281V113.621H13.2655V106.988Z" fill="#F1F4CE" />
				<path d="M13.2655 100.21H6.63281V106.843H13.2655V100.21Z" fill="#F1F4CE" />
				<path d="M13.2655 40.084H6.63281V46.7166H13.2655V40.084Z" fill="#BBE4FF" />
				<path d="M13.2655 33.4514H6.63281V40.0841H13.2655V33.4514Z" fill="#CDF7F0" />
				<path d="M6.6327 93.5774H6.10352e-05V100.21H6.6327V93.5774Z" fill="#F1F4CE" />
				<path d="M6.6327 86.9443H6.10352e-05V93.577H6.6327V86.9443Z" fill="#F1F4CE" />
				<path d="M6.6327 80.1687H6.10352e-05V86.8013H6.6327V80.1687Z" fill="#40BBFF" />
				<path d="M6.6327 73.5356H6.10352e-05V80.1683H6.6327V73.5356Z" fill="#40BBFF" />
				<path d="M6.6327 66.9026H6.10352e-05V73.5353H6.6327V66.9026Z" fill="#69EDFF" />
				<path d="M6.6327 60.1262H6.10352e-05V66.7589H6.6327V60.1262Z" fill="#69EDFF" />
				<path d="M6.6327 53.4939H6.10352e-05V60.1265H6.6327V53.4939Z" fill="#69EDFF" />
				<path d="M6.6327 46.7163H6.10352e-05V53.349H6.6327V46.7163Z" fill="#BBE4FF" />
			</g>
		</svg>
	);
};

const ProhibiteSVG = () => {
	const imgRef = useRef<SVGSVGElement>(null);
	const { step } = useContext(StepContext) as IStep;
	useEffect(() => {
		if (imgRef && imgRef.current) {
			const imgElement = imgRef.current;

			// Сброс анимации
			imgElement.style.animation = 'none';

			// Используем requestAnimationFrame для перезапуска анимации
			requestAnimationFrame(() => {
				imgElement.style.animation = '';
			});
		}
	}, [step]);
	return (
		<svg
			ref={imgRef}
			width="147"
			height="148"
			viewBox="0 0 147 148"
			fill="none"
			className={styles.bubbleSVG}
			xmlns="http://www.w3.org/2000/svg">
			<circle cx="73.536" cy="73.536" r="70.6522" fill="#F14338" fill-opacity="0.3" />
			<path d="M146.928 93.5771H140.295V100.21H146.928V93.5771Z" fill="#F14338" />
			<path d="M146.928 86.9443H140.295V93.577H146.928V86.9443Z" fill="#F14338" />
			<path d="M146.928 80.1685H140.295V86.8011H146.928V80.1685Z" fill="#F14338" />
			<path d="M146.928 73.5356H140.295V80.1683H146.928V73.5356Z" fill="#F14338" />
			<path d="M146.928 66.9028H140.295V73.5355H146.928V66.9028Z" fill="#F14338" />
			<path d="M146.928 60.1265H140.295V66.7591H146.928V60.1265Z" fill="#F14338" />
			<path d="M146.928 53.4937H140.295V60.1263H146.928V53.4937Z" fill="#F14338" />
			<path d="M146.928 46.7163H140.295V53.349H146.928V46.7163Z" fill="#F14338" />
			<path d="M140.295 106.988H133.662V113.62H140.295V106.988Z" fill="#F14338" />
			<path d="M140.295 100.21H133.662V106.843H140.295V100.21Z" fill="#F14338" />
			<path d="M140.295 40.084H133.662V46.7166H140.295V40.084Z" fill="#F14338" />
			<path d="M140.295 33.4517H133.662V40.0843H140.295V33.4517Z" fill="#F14338" />
			<path d="M134 113H127V120H134V113Z" fill="#F14338" />
			<path d="M133.518 26.6743H126.886V33.307H133.518V26.6743Z" fill="#F14338" />
			<path d="M126.886 20.0415H120.253V26.6742H126.886V20.0415Z" fill="#F14338" />
			<path d="M120.253 127.029H113.62V133.662H120.253V127.029Z" fill="#F14338" />
			<path d="M120.253 13.4087H113.62V20.0414H120.253V13.4087Z" fill="#F14338" />
			<path d="M113.476 127.029H106.844V133.662H113.476V127.029Z" fill="#F14338" />
			<path d="M113.476 13.4087H106.844V20.0414H113.476V13.4087Z" fill="#F14338" />
			<path d="M106.844 133.662H100.211V140.295H106.844V133.662Z" fill="#F14338" />
			<path d="M106.844 6.63232H100.211V13.2649H106.844V6.63232Z" fill="#F14338" />
			<path d="M100.211 133.662H93.5781V140.295H100.211V133.662Z" fill="#F14338" />
			<path d="M100.211 6.63232H93.5781V13.2649H100.211V6.63232Z" fill="#F14338" />
			<path d="M93.4334 133.662H86.8008V140.295H93.4334V133.662Z" fill="#F14338" />
			<path d="M93.4334 6.63232H86.8008V13.2649H93.4334V6.63232Z" fill="#F14338" />
			<path d="M86.8013 140.439H80.1687V147.072H86.8013V140.439Z" fill="#F14338" />
			<path d="M86.8013 0H80.1687V6.63266H86.8013V0Z" fill="#F14338" />
			<path d="M80.0243 140.439H73.3916V147.072H80.0243V140.439Z" fill="#F14338" />
			<path d="M80.0243 0H73.3916V6.63266H80.0243V0Z" fill="#F14338" />
			<path d="M73.3915 140.439H66.7588V147.072H73.3915V140.439Z" fill="#F14338" />
			<path d="M73.3915 0H66.7588V6.63266H73.3915V0Z" fill="#F14338" />
			<path d="M66.7586 140.439H60.126V147.072H66.7586V140.439Z" fill="#F14338" />
			<path d="M66.7586 0H60.126V6.63266H66.7586V0Z" fill="#F14338" />
			<path d="M59.9823 133.662H53.3496V140.295H59.9823V133.662Z" fill="#F14338" />
			<path d="M59.9823 6.63232H53.3496V13.2649H59.9823V6.63232Z" fill="#F14338" />
			<path d="M53.3495 133.662H46.7168V140.295H53.3495V133.662Z" fill="#F14338" />
			<path d="M53.3495 6.63232H46.7168V13.2649H53.3495V6.63232Z" fill="#F14338" />
			<path d="M46.7166 133.662H40.084V140.295H46.7166V133.662Z" fill="#F14338" />
			<path d="M46.7166 6.63232H40.084V13.2649H46.7166V6.63232Z" fill="#F14338" />
			<path d="M39.9402 127.029H33.3076V133.662H39.9402V127.029Z" fill="#F14338" />
			<path d="M39.9402 13.4087H33.3076V20.0414H39.9402V13.4087Z" fill="#F14338" />
			<path d="M33.3075 127.029H26.6748V133.662H33.3075V127.029Z" fill="#F14338" />
			<path d="M33.3075 13.4087H26.6748V20.0414H33.3075V13.4087Z" fill="#F14338" />
			<path d="M26.6747 120.253H20.042V126.886H26.6747V120.253Z" fill="#F14338" />
			<path d="M19.8975 113.62H13.2649V120.252H19.8975V113.62Z" fill="#F14338" />
			<path d="M20 27H13V34H20V27Z" fill="#F14338" />
			<path d="M13.2655 106.988H6.63281V113.62H13.2655V106.988Z" fill="#F14338" />
			<path d="M13.2655 100.21H6.63281V106.843H13.2655V100.21Z" fill="#F14338" />
			<path d="M13.2655 40.084H6.63281V46.7166H13.2655V40.084Z" fill="#F14338" />
			<path d="M13.2655 33.4517H6.63281V40.0843H13.2655V33.4517Z" fill="#F14338" />
			<path d="M6.63264 93.5771H0V100.21H6.63264V93.5771Z" fill="#F14338" />
			<path d="M6.63264 86.9443H0V93.577H6.63264V86.9443Z" fill="#F14338" />
			<path d="M6.63264 80.1685H0V86.8011H6.63264V80.1685Z" fill="#F14338" />
			<path d="M6.63264 73.5356H0V80.1683H6.63264V73.5356Z" fill="#F14338" />
			<path d="M6.63264 66.9028H0V73.5355H6.63264V66.9028Z" fill="#F14338" />
			<path d="M6.63264 60.1265H0V66.7591H6.63264V60.1265Z" fill="#F14338" />
			<path d="M6.63264 53.4937H0V60.1263H6.63264V53.4937Z" fill="#F14338" />
			<path d="M6.63264 46.7163H0V53.349H6.63264V46.7163Z" fill="#F14338" />
			<path d="M34.3999 41.4H41.5333V48.5334H34.3999V41.4Z" fill="#F14338" />
			<path
				d="M41.5333 41.4V48.5334H34.3999V41.4H41.5333ZM48.6666 48.5334V55.6667H41.5333V48.5334H48.6666ZM62.9332 62.8V69.9334H55.7999V62.8H62.9332Z"
				fill="#F14338"
			/>
			<path d="M84.3332 91.3334H91.4666V98.4667H84.3332V91.3334Z" fill="#F14338" />
			<path
				d="M70.0666 69.9334V77.0667H62.9332V69.9334H70.0666ZM77.1999 77.0667V84.2H70.0666V77.0667H77.1999ZM84.3332 84.2V91.3334H77.1999V84.2H84.3332ZM91.4666 91.3334V98.4667H84.3332V91.3334H91.4666ZM105.733 105.6V112.733H98.5999V105.6H105.733Z"
				fill="#F14338"
			/>
			<path d="M19.9999 26.9999H27.1332V34.1332H19.9999V26.9999Z" fill="#F14338" />
			<path d="M77.1999 77.0667V69.9334H70.0666V77.0667H77.1999Z" fill="#F14338" />
			<path d="M41.4 41.4H48.5333V48.5333H41.4V41.4Z" fill="#F14338" />
			<path
				d="M27.1333 20V27.1333H20V20H27.1333ZM34.2667 27.1333V34.2667H27.1333V27.1333H34.2667ZM41.4 34.2667V41.4H34.2667V34.2667H41.4ZM48.5333 41.4V48.5333H41.4V41.4H48.5333ZM55.6667 48.5333V55.6667H48.5333V48.5333H55.6667ZM62.8 55.6667V62.8H55.6667V55.6667H62.8ZM69.9333 62.8V69.9333H62.8V62.8H69.9333Z"
				fill="#F14338"
			/>
			<path d="M91.3333 91.3333H98.4667V98.4667H91.3333V91.3333Z" fill="#F14338" />
			<path
				d="M84.2 77.0667V84.2H77.0667V77.0667H84.2ZM91.3333 84.2V91.3333H84.2V84.2H91.3333ZM98.4667 91.3333V98.4667H91.3333V91.3333H98.4667ZM105.6 98.4667V105.6H98.4667V98.4667H105.6ZM112.733 105.6V112.733H105.6V105.6H112.733ZM119.867 112.733V119.867H112.733V112.733H119.867Z"
				fill="#F14338"
			/>
			<path d="M127 127V119.867H119.867V127H127Z" fill="#F14338" />
			<path d="M127 119.867V112.733H119.867V119.867H127Z" fill="#F14338" />
		</svg>
	);
};

const SecondPage = () => {
	const { step } = useContext(StepContext) as IStep;

	if (step === 2) {
		return (
			<>
				<BgImage />
				<AttentionBlock
					attentionText={'Нажимай на НЛО и отравляй их В ДАЛЕКИЙ КОСМОС!'}
					buttonText="Ясно">
					<Alien
						containerClassName={styles.alienCont}
						imageBubble={<BubbleSVG />}
						imageAlien={alienIMG}
					/>
				</AttentionBlock>
			</>
		);
	}

	if (step === 3) {
		return (
			<>
				<BgImage />
				<AttentionBlock
					attentionText={
						'НО НЕ ВСЕ ИНОПЛАНЕТЯНЕ ЗЛЫЕ. КТО-то ПРОСТО УСТАЛ ИЛИ ЗАБОЛЕЛ. ДАЙ ИМ ПРОСТО УЛЕТЕТЬ И ВСЁ БУДЕТ ХОРОШО!'
					}
					buttonText="Погнали">
					<Alien
						containerClassName={styles.alienCont}
						imageBubble={<ProhibiteSVG />}
						imageAlien={ourAlienImg}
					/>
				</AttentionBlock>
			</>
		);
	}

	return <></>;
};

export default SecondPage;
